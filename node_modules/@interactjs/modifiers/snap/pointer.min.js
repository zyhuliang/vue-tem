import{makeModifier as e}from"../base.min.js";import*as t from"../../utils/index.min.js";const n={start(e){const{interaction:n,interactable:r,element:i,rect:a,state:s,startOffset:o}=e,{options:l}=s,c=l.offsetWithOrigin?function(e){const{element:n}=e.interaction;return t.rect.rectToXY(t.rect.resolveRectLike(e.state.options.origin,null,null,[n]))||t.getOriginXY(e.interactable,n,e.interaction.prepared.name)}(e):{x:0,y:0};let g;if("startCoords"===l.offset)g={x:n.coords.start.page.x,y:n.coords.start.page.y};else{const e=t.rect.resolveRectLike(l.offset,r,i,[n]);g=t.rect.rectToXY(e)||{x:0,y:0},g.x+=c.x,g.y+=c.y}const{relativePoints:f}=l;s.offsets=a&&f&&f.length?f.map((e,t)=>({index:t,relativePoint:e,x:o.left-a.width*e.x+g.x,y:o.top-a.height*e.y+g.y})):[t.extend({index:0,relativePoint:null},g)]},set(e){const{interaction:n,coords:r,state:i}=e,{options:a,offsets:s}=i,o=t.getOriginXY(n.interactable,n.element,n.prepared.name),l=t.extend({},r),c=[];a.offsetWithOrigin||(l.x-=o.x,l.y-=o.y);for(const e of s){const r=l.x-e.x,i=l.y-e.y;for(let s=0,o=a.targets.length;s<o;s++){const o=a.targets[s];let l;l=t.is.func(o)?o(r,i,n,e,s):o,l&&c.push({x:(t.is.number(l.x)?l.x:r)+e.x,y:(t.is.number(l.y)?l.y:i)+e.y,range:t.is.number(l.range)?l.range:a.range,source:o,index:s,offset:e})}}const g={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}};for(const e of c){const n=e.range,r=e.x-l.x,i=e.y-l.y,a=t.hypot(r,i);let s=a<=n;n===1/0&&g.inRange&&g.range!==1/0&&(s=!1),g.target&&!(s?g.inRange&&n!==1/0?a/n<g.distance/g.range:n===1/0&&g.range!==1/0||a<g.distance:!g.inRange&&a<g.distance)||(g.target=e,g.distance=a,g.range=n,g.inRange=s,g.delta.x=r,g.delta.y=i)}return g.inRange&&(r.x=g.target.x,r.y=g.target.y),i.closest=g,g},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};export default e(n,"snap");export{n as snap};
//# sourceMappingURL=pointer.min.js.map